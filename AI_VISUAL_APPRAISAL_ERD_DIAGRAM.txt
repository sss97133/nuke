# AI VISUAL APPRAISAL SYSTEM - ERD ASCII DIAGRAM
# Consolidates 10+ existing systems into unified pipeline

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  VEHICLES (Core Entity)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ id (PK) | year | make | model | vin | purchase_price | msrp                         â”‚   â”‚
â”‚  â”‚ current_value (DEPRECATED) â†’ use expert_valuations.estimated_value instead          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â–²
                                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                               â”‚                         â”‚
        â–¼                   â–¼                               â–¼                         â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VEHICLE_IMAGES  â”‚  â”‚ CONDITION_ASSESSMENTS    â”‚  â”‚ EXPERT_VALUATIONS    â”‚  â”‚ PRICE_HISTORY       â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚ id (PK)         â”‚  â”‚ id (PK)                  â”‚  â”‚ id (PK)              â”‚  â”‚ id (PK)             â”‚
â”‚ vehicle_id (FK) â”‚  â”‚ vehicle_id (FK)          â”‚  â”‚ vehicle_id (FK)      â”‚  â”‚ vehicle_id (FK)     â”‚
â”‚ image_url       â”‚  â”‚ overall_rating (1-6)     â”‚  â”‚ estimated_value      â”‚  â”‚ price               â”‚
â”‚ angle           â”‚  â”‚ exterior_rating (1-10)   â”‚  â”‚ confidence (0-100)   â”‚  â”‚ price_type          â”‚
â”‚ created_at      â”‚  â”‚ interior_rating (1-10)   â”‚  â”‚ market_low           â”‚  â”‚ source_type         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ mechanical_rating (1-10) â”‚  â”‚ market_mid           â”‚  â”‚ valid_from          â”‚
         â”‚           â”‚ undercarriage_rating     â”‚  â”‚ market_high          â”‚  â”‚ valid_to            â”‚
         â”‚           â”‚ condition_multiplier     â”‚  â”‚ current_state_value  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚ images_assessed[]        â”‚  â”‚ completed_value      â”‚
         â”‚           â”‚ completeness (0-100%)    â”‚  â”‚ remaining_investment â”‚
         â”‚           â”‚ assessed_by_model        â”‚  â”‚ reasoning            â”‚
         â”‚           â”‚ human_verified           â”‚  â”‚ data_sources[]       â”‚
         â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ valuation_date       â”‚
         â”‚                    â”‚                    â”‚ expires_at           â”‚
         â”‚                    â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                           â”‚
         â–¼                    â–¼                           â”‚
                                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         IMAGE ANALYSIS LAYER             â”‚             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚             â”‚
â”‚                                          â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚             â”‚
â”‚  â”‚ IMAGE_TAGS                      â”‚     â”‚             â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•                  â”‚     â”‚             â”‚
â”‚  â”‚ id (PK)                         â”‚     â”‚             â”‚
â”‚  â”‚ image_id (FK)                   â”‚     â”‚             â–¼
â”‚  â”‚ tag_type (part/system/issue)    â”‚     â”‚
â”‚  â”‚ tag_name                        â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ metadata {estimated_value}      â”‚     â”‚    â”‚ VALUATION_COMPONENTS    â”‚
â”‚  â”‚ confidence                      â”‚     â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚ id (PK)                 â”‚
â”‚                                          â”‚    â”‚ valuation_id (FK)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚ component_type          â”‚
â”‚  â”‚ COMPONENT_CONDITIONS            â”‚     â”‚    â”‚ component_name          â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚     â”‚    â”‚ value_usd               â”‚
â”‚  â”‚ id (PK)                         â”‚     â”‚    â”‚ calculation_method      â”‚
â”‚  â”‚ vehicle_id (FK)                 â”‚     â”‚    â”‚ confidence              â”‚
â”‚  â”‚ image_id (FK)                   â”‚     â”‚    â”‚ citation_ids[]          â”‚
â”‚  â”‚ component_name                  â”‚     â”‚    â”‚ image_ids[]             â”‚
â”‚  â”‚ component_type                  â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ condition_rating (1-10)         â”‚     â”‚               â”‚
â”‚  â”‚ damage_types[]                  â”‚     â”‚               â”‚
â”‚  â”‚ wear_level                      â”‚     â”‚               â–¼
â”‚  â”‚ needs_attention                 â”‚     â”‚
â”‚  â”‚ repair_priority                 â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ estimated_cost                  â”‚     â”‚    â”‚ VALUATION_CITATIONS     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                          â”‚    â”‚ id (PK)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚ valuation_component_id  â”‚
â”‚  â”‚ PAINT_ASSESSMENTS               â”‚     â”‚    â”‚ vehicle_id (FK)         â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚     â”‚    â”‚ component_type          â”‚
â”‚  â”‚ id (PK)                         â”‚     â”‚    â”‚ value_usd               â”‚
â”‚  â”‚ vehicle_id (FK)                 â”‚     â”‚    â”‚ submitted_by (FK)       â”‚
â”‚  â”‚ image_id (FK)                   â”‚     â”‚    â”‚ submitter_role          â”‚
â”‚  â”‚ panel_name                      â”‚     â”‚    â”‚ evidence_type           â”‚
â”‚  â”‚ repaint_quality                 â”‚     â”‚    â”‚ source_image_tag_id     â”‚
â”‚  â”‚ finish_type                     â”‚     â”‚    â”‚ source_document_id      â”‚
â”‚  â”‚ defects[]                       â”‚     â”‚    â”‚ effective_date          â”‚
â”‚  â”‚ paint_quality_score (1-10)      â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ estimated_cost                  â”‚     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚
â”‚                                          â”‚               â–¼
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PROFILE_IMAGE_INSIGHTS          â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚     â”‚    â”‚ USER_VALUATION_INPUTS   â”‚
â”‚  â”‚ id (PK)                         â”‚     â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚  â”‚ vehicle_id (FK)                 â”‚     â”‚    â”‚ id (PK)                 â”‚
â”‚  â”‚ confidence                      â”‚     â”‚    â”‚ user_id (FK)            â”‚
â”‚  â”‚ condition_score                 â”‚     â”‚    â”‚ vehicle_id (FK)         â”‚
â”‚  â”‚ condition_label                 â”‚     â”‚    â”‚ citation_id (FK)        â”‚
â”‚  â”‚ checklist {rolling_state,       â”‚     â”‚    â”‚ field_name              â”‚
â”‚  â”‚            engine_present,      â”‚     â”‚    â”‚ field_value_numeric     â”‚
â”‚  â”‚            frame_damage,        â”‚     â”‚    â”‚ input_method            â”‚
â”‚  â”‚            rust_severity}       â”‚     â”‚    â”‚ accuracy_score          â”‚
â”‚  â”‚ summary_date                    â”‚     â”‚    â”‚ verification_count      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MARKET RESEARCH LAYER                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ MARKET_COMPARABLES (NEW TABLE)                                  â”‚        â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚        â”‚
â”‚  â”‚ id (PK)                                                          â”‚        â”‚
â”‚  â”‚ vehicle_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚        â”‚
â”‚  â”‚ source (BaT, Hemmings, Classic.com)       â”‚                     â”‚        â”‚
â”‚  â”‚ source_url                                 â”‚                     â”‚        â”‚
â”‚  â”‚ comp_year, comp_make, comp_model           â”‚                     â”‚        â”‚
â”‚  â”‚ sale_price                                 â”‚                     â”‚        â”‚
â”‚  â”‚ sale_date                                  â”‚                     â”‚        â”‚
â”‚  â”‚ condition_description                      â”‚   Links to          â”‚        â”‚
â”‚  â”‚ comp_images[] (photos of comparable)       â”‚   EXPERT_           â”‚        â”‚
â”‚  â”‚ similarity_score (0-100) â—„â”€â”€AI rates this  â”‚   VALUATIONS        â”‚        â”‚
â”‚  â”‚ visual_comparison {AI detailed analysis}   â”‚                     â”‚        â”‚
â”‚  â”‚ found_at, expires_at                       â”‚                     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ MARKET_DATA (Existing - External APIs)                          â”‚        â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                      â”‚        â”‚
â”‚  â”‚ id (PK)                                                          â”‚        â”‚
â”‚  â”‚ vehicle_id (FK)                                                  â”‚        â”‚
â”‚  â”‚ source (marketcheck, hagerty, classic.com)                      â”‚        â”‚
â”‚  â”‚ price_value                                                      â”‚        â”‚
â”‚  â”‚ confidence_score                                                 â”‚        â”‚
â”‚  â”‚ raw_data {JSON from API}                                         â”‚        â”‚
â”‚  â”‚ created_at                                                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REFERENCE DATA LAYER                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ GRADING_STANDARDS (Reference)                                   â”‚        â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                              â”‚        â”‚
â”‚  â”‚ id (PK)                                                          â”‚        â”‚
â”‚  â”‚ standard_name (Hagerty, PPI, Classic Car Club)                  â”‚        â”‚
â”‚  â”‚ standard_version                                                 â”‚        â”‚
â”‚  â”‚ category (exterior, interior, mechanical, overall)              â”‚        â”‚
â”‚  â”‚ rating_level (1-6 for Hagerty, 1-10 for others)                 â”‚        â”‚
â”‚  â”‚ rating_label (Concours, Excellent, Good, Fair, Rough, Parts)   â”‚        â”‚
â”‚  â”‚ criteria_description                                             â”‚        â”‚
â”‚  â”‚ specific_requirements[]                                          â”‚        â”‚
â”‚  â”‚ disqualifying_factors[]                                          â”‚        â”‚
â”‚  â”‚ example_conditions[]                                             â”‚        â”‚
â”‚  â”‚ reference_images[]                                               â”‚        â”‚
â”‚  â”‚ source_document, source_url                                      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              DATA FLOW PIPELINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: IMAGE ANALYSIS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  vehicle_images (239 photos)
        â”‚
        â”œâ”€â”€â–º AI Vision API (GPT-4o)
        â”‚
        â”œâ”€â”€â–º image_tags
        â”‚    â€¢ Detected: "Custom leather seats"
        â”‚    â€¢ Detected: "Professional paint"
        â”‚    â€¢ Detected: "Lifted suspension"
        â”‚
        â”œâ”€â”€â–º component_conditions
        â”‚    â€¢ Interior: 9/10 - Custom leather, excellent
        â”‚    â€¢ Paint: 9/10 - Show quality, no defects
        â”‚    â€¢ Suspension: 8/10 - Professional lift, clean
        â”‚
        â”œâ”€â”€â–º paint_assessments
        â”‚    â€¢ Panel: Hood - repaint_quality: show_quality
        â”‚    â€¢ Panel: Door - repaint_quality: show_quality
        â”‚
        â””â”€â”€â–º profile_image_insights
             â€¢ Overall: Professional build
             â€¢ Completion: 90%
             â€¢ Checklist: engine_presentâœ“, rollingâœ“, no_rustâœ“


STEP 2: CONDITION ASSESSMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  image_tags + component_conditions + paint_assessments + profile_image_insights
        â”‚
        â”œâ”€â”€â–º Condition Assessment Engine
        â”‚
        â””â”€â”€â–º condition_assessments
             â€¢ overall_rating: 2 (Excellent - Hagerty scale)
             â€¢ exterior_rating: 9/10
             â€¢ interior_rating: 9/10
             â€¢ mechanical_rating: 8/10
             â€¢ condition_multiplier: 1.15 (15% premium)
             â€¢ images_assessed: [all 239 image IDs]
             â€¢ completeness: 95%


STEP 3: MARKET RESEARCH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  vehicle {1974 Ford Bronco} + condition_assessments {Excellent}
        â”‚
        â”œâ”€â”€â–º Search BaT, Hemmings, Classic.com
        â”‚
        â”œâ”€â”€â–º market_comparables
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    â”‚ 1973 Bronco - $145k - BaT - 92% similar â”‚
        â”‚    â”‚ 1974 Bronco - $110k - Hem - 88% similar â”‚
        â”‚    â”‚ 1975 Bronco - $98k - C&B - 81% similar  â”‚
        â”‚    â”‚ ... 5 more comparables                   â”‚
        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â–º AI Visual Comparison
        â”‚    â€¢ Compare photos of our Bronco vs comparables
        â”‚    â€¢ Rate similarity: paint, interior, mods, condition
        â”‚
        â””â”€â”€â–º Calculate base_market_value: $108,000
             (Weighted average by similarity score)


STEP 4: EXPERT VALUATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  base_market_value + condition_multiplier + receipts + documents
        â”‚
        â”œâ”€â”€â–º Expert Valuation Engine
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    â”‚ Base: $108,000                         â”‚
        â”‚    â”‚ Ã— Condition: 1.15 = $124,200           â”‚
        â”‚    â”‚ - Completion: -10% = -$11,220          â”‚
        â”‚    â”‚ + Documentation: +5% = +$5,400         â”‚
        â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
        â”‚    â”‚ Final: $115,000                        â”‚
        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â–º expert_valuations
        â”‚    â€¢ estimated_value: $115,000
        â”‚    â€¢ confidence: 85%
        â”‚    â€¢ market_low: $97,750
        â”‚    â€¢ market_mid: $115,000
        â”‚    â€¢ market_high: $132,250
        â”‚    â€¢ current_state_value: $115,000
        â”‚    â€¢ completed_value: $125,000 (when 100% done)
        â”‚    â€¢ remaining_investment: $15,000 (to complete)
        â”‚    â€¢ data_sources: [AI Vision, BaT, MarketCheck, Receipts]
        â”‚
        â”œâ”€â”€â–º valuation_components
        â”‚    â€¢ Paint: $12,000 (show_quality)
        â”‚    â€¢ Interior: $8,000 (custom_leather)
        â”‚    â€¢ Suspension: $10,000 (professional_lift)
        â”‚    â€¢ Drivetrain: $25,000 (rebuilt)
        â”‚    â€¢ Body: $15,000 (custom_bumpers)
        â”‚    â€¢ Wheels/Tires: $5,000 (custom)
        â”‚    â€¢ Labor: $40,000 (documented hours)
        â”‚
        â””â”€â”€â–º valuation_citations (for each component)
             â€¢ Paint â†’ receipt_id, image_tag_id, submitted_by
             â€¢ Interior â†’ receipt_id, image_tag_id
             â€¢ etc.


STEP 5: USER VERIFICATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  expert_valuations displayed to user
        â”‚
        â”œâ”€â”€â–º User reviews valuation
        â”‚    â€¢ "Paint cost was actually $15k, not $12k"
        â”‚    â€¢ Uploads receipt as evidence
        â”‚
        â”œâ”€â”€â–º user_valuation_inputs
        â”‚    â€¢ field_name: "paint_cost"
        â”‚    â€¢ field_value_numeric: 15000
        â”‚    â€¢ input_method: "manual"
        â”‚    â€¢ replaced_ai_value: true
        â”‚
        â”œâ”€â”€â–º valuation_citations (updated)
        â”‚    â€¢ New citation created with user's receipt
        â”‚    â€¢ Confidence increased
        â”‚
        â””â”€â”€â–º expert_valuations (re-calculated)
             â€¢ estimated_value: $118,000 (updated)
             â€¢ confidence: 90% (increased with user data)


STEP 6: PRICE HISTORY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  expert_valuations over time
        â”‚
        â””â”€â”€â–º price_history
             â€¢ 2025-10-22: $108,000 (initial estimate)
             â€¢ 2025-11-01: $112,000 (+3.7%)
             â€¢ 2025-11-15: $115,000 (+2.7%)
             â€¢ 2025-11-22: $118,000 (+2.6%) â† current
             
             Display: "â†‘ +7.2% 30D" (from Oct 22 to Nov 22)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           CONSOLIDATION STRATEGY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEPRECATED (Remove or Stop Using)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ vehicles.current_value        â†’ Use expert_valuations.estimated_value
âŒ vehicle_value_assessments     â†’ Merged into condition_assessments
âŒ valuation_blanks              â†’ No longer needed
âŒ VehicleValuationService.ts    â†’ Replace with ExpertValuationService.ts
âŒ auto-resto-estimate function  â†’ Merge into expert-valuation function


KEEP & ENHANCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… vehicle_images                â†’ Source data
âœ… image_tags                    â†’ AI detection results
âœ… profile_image_insights        â†’ AI summary
âœ… component_conditions          â†’ Part-level tracking
âœ… paint_assessments             â†’ Paint-specific
âœ… condition_assessments         â†’ Unified Hagerty scale
âœ… grading_standards             â†’ Reference data
âœ… market_data                   â†’ External APIs
âœ… price_history                 â†’ Time-series tracking
âœ… valuation_citations           â†’ Source tracking
âœ… user_valuation_inputs         â†’ User verification


CREATE NEW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ†• market_comparables            â†’ Similar vehicle sales
ğŸ†• expert_valuations             â†’ Final valuation results
ğŸ†• valuation_components          â†’ Breakdown by system
ğŸ†• ExpertValuationService.ts     â†’ New frontend service
ğŸ†• expert-valuation function     â†’ New edge function


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         EXAMPLE: 1974 FORD BRONCO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BEFORE (Current Broken System)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1974 Ford Bronco                       â”‚
â”‚                                        â”‚
â”‚ $10,988 â†‘ +7.2% 30D                   â”‚
â”‚ VALUATION SERVICE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problem: Generic fallback value ($10k default)
Source: No real data, just year-based estimate


AFTER (Unified AI Visual System)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1974 Ford Bronco                       â”‚
â”‚                                        â”‚
â”‚ $115,000 â†‘ +7.2% 30D                  â”‚
â”‚ EXPERT APPRAISAL Â· 85% CONFIDENCE     â”‚
â”‚                                        â”‚
â”‚ [View breakdown] [8 comparables]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Solution: Real analysis from:
  â€¢ 239 photos analyzed
  â€¢ 8 market comparables (BaT, Hemmings)
  â€¢ Hagerty Excellent (2) condition rating
  â€¢ Professional build quality detected
  â€¢ Transparent breakdown by system
  â€¢ Cited sources for every dollar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This ERD consolidates all existing systems into one coherent, accurate,
transparent, and human-like AI visual appraisal system.

